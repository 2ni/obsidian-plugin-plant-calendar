/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PlantCalendarPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var parseMonths = (input) => {
  let result = [];
  const ranges = input.split(",");
  const filterHalfMonth = (start, end, result2) => {
    if (start.startsWith(".")) {
      result2[0] = "x";
    }
    if (start.endsWith(".")) {
      result2[1] = "x";
    }
    if (end.startsWith(".")) {
      result2[result2.length - 2] = "x";
    }
    if (end.endsWith(".")) {
      result2[result2.length - 1] = "x";
    }
    return result2.filter((v) => typeof v != "string");
  };
  for (const range of ranges) {
    if (range.includes("-")) {
      const [start, end] = range.replace(/\./g, "").split("-").map(Number);
      const [startOrig, endOrig] = range.split("-");
      const resultTemp = [];
      for (let i = start; i <= end; i++) {
        resultTemp.push(i * 2 - 1, i * 2);
      }
      result = [...result, ...filterHalfMonth(startOrig, endOrig, resultTemp)];
    } else {
      const month = Number(range.replace(".", ""));
      if (range.startsWith(".") || !range.includes(".")) {
        result.push(month * 2);
      }
      if (range.endsWith(".") || !range.includes(".")) {
        result.push(month * 2 - 1);
      }
    }
  }
  return result.sort((a, b) => a - b);
};
var PlantCalendarPlugin = class extends import_obsidian.Plugin {
  async onload() {
    this.addCommand({
      id: "plantcalendar-add",
      name: "Add a calendar",
      editorCallback: (editor, view) => {
        editor.replaceRange("```plantcalendar\nAubergine\nAnzucht:2-3\nGew\xE4chshaus:.4,5,6\nFreiland:.5-7\nErnte:8-10\n```", editor.getCursor());
      }
    });
    this.registerMarkdownCodeBlockProcessor("plantcalendar", (source, el, ctx) => {
      const month = ["Jan", "Feb", "Mar", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez"];
      const plants = {};
      const rows = source.split("\n");
      const table = el.createEl("table", { cls: "plantcalendar" });
      let monthShown = false;
      let rowCount = 1;
      rows.forEach((row) => {
        if (!row.match(":[ .,0-9-]*$")) {
          if (monthShown) {
            table.createEl("tr", { cls: "spacer" }).createEl("td", { attr: { colspan: "25" } });
          }
          let tableRow = table.createEl("tr");
          let labelCell = tableRow.createEl("th");
          import_obsidian.MarkdownRenderer.renderMarkdown(row, labelCell, "", this);
          if (!monthShown || rowCount++ % 6 == 0) {
            monthShown = true;
            for (let i = 0; i < 12; i++) {
              tableRow.createEl("th", { text: month[i], attr: { colspan: "2" } });
            }
          }
        } else {
          let [label, highlights] = row.split(":");
          let tableRow = table.createEl("tr", { cls: label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/ /g, "-") });
          highlights = parseMonths(highlights.replace(/ /g, ""));
          tableRow.createEl("td", { text: label });
          for (let i = 0; i < 24; i++) {
            tableRow.createEl("td", { attr: { title: month[Math.floor(i / 2)] }, text: highlights.includes(i + 1) ? "x" : "", cls: highlights.includes(i + 1) ? "highlight" : "" });
          }
        }
      });
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blJlbmRlcmVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5jb25zdCBwYXJzZU1vbnRocyA9IChpbnB1dCkgPT4ge1xuICBsZXQgcmVzdWx0ID0gW107XG4gIGNvbnN0IHJhbmdlcyA9IGlucHV0LnNwbGl0KCcsJyk7IC8vIHNwbGl0IGJ5IGNvbW1hcyBmb3Igc2VwYXJhdGUgcmFuZ2VzXG5cbiAgY29uc3QgZmlsdGVySGFsZk1vbnRoID0gKHN0YXJ0LCBlbmQsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChzdGFydC5zdGFydHNXaXRoKCcuJykpIHtcbiAgICAgIHJlc3VsdFswXSA9ICd4JztcbiAgICB9XG4gICAgaWYgKHN0YXJ0LmVuZHNXaXRoKCcuJykpIHtcbiAgICAgIHJlc3VsdFsxXSA9ICd4JztcbiAgICB9XG4gICAgaWYgKGVuZC5zdGFydHNXaXRoKCcuJykpIHtcbiAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMl0gPSAneCc7XG4gICAgfVxuICAgIGlmIChlbmQuZW5kc1dpdGgoJy4nKSkge1xuICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSA9ICd4JztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5maWx0ZXIodiA9PiB0eXBlb2YgdiAhPSAnc3RyaW5nJyk7XG4gIH07XG5cbiAgZm9yIChjb25zdCByYW5nZSBvZiByYW5nZXMpIHtcbiAgICBpZiAocmFuZ2UuaW5jbHVkZXMoJy0nKSkge1xuICAgICAgLy8gaGFuZGxlIHJhbmdlcyBsaWtlICc1LTcnXG4gICAgICBjb25zdCBbc3RhcnQsIGVuZF0gPSByYW5nZS5yZXBsYWNlKC9cXC4vZywgJycpLnNwbGl0KCctJykubWFwKE51bWJlcik7XG4gICAgICBjb25zdCBbc3RhcnRPcmlnLCBlbmRPcmlnXSA9IHJhbmdlLnNwbGl0KCctJyk7XG4gICAgICBjb25zdCByZXN1bHRUZW1wID0gW107XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgICAgcmVzdWx0VGVtcC5wdXNoKGkgKiAyIC0gMSwgaSAqIDIpOyAvLyBBZGQgYm90aCBoYWxmLW1vbnRocyBmb3IgZWFjaCBtb250aFxuICAgICAgfVxuICAgICAgcmVzdWx0ID0gWyAuLi5yZXN1bHQsIC4uLmZpbHRlckhhbGZNb250aChzdGFydE9yaWcsIGVuZE9yaWcsIHJlc3VsdFRlbXApIF07XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaGFuZGxlIHNpbmdsZSBtb250aHMgbGlrZSAnMiw1J1xuICAgICAgY29uc3QgbW9udGggPSBOdW1iZXIocmFuZ2UucmVwbGFjZSgnLicsICcnKSk7XG4gICAgICBpZiAocmFuZ2Uuc3RhcnRzV2l0aCgnLicpIHx8ICFyYW5nZS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKG1vbnRoICogMik7XG4gICAgICB9XG4gICAgICBpZiAocmFuZ2UuZW5kc1dpdGgoJy4nKSB8fCAhcmFuZ2UuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgICByZXN1bHQucHVzaChtb250aCAqIDIgLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0LnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxhbnRDYWxlbmRhclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgaWQ6ICdwbGFudGNhbGVuZGFyLWFkZCcsXG4gICAgICBuYW1lOiAnQWRkIGEgY2FsZW5kYXInLFxuICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoJ2BgYHBsYW50Y2FsZW5kYXJcXG5BdWJlcmdpbmVcXG5Bbnp1Y2h0OjItM1xcbkdld1x1MDBFNGNoc2hhdXM6LjQsNSw2XFxuRnJlaWxhbmQ6LjUtN1xcbkVybnRlOjgtMTBcXG5gYGAnLCBlZGl0b3IuZ2V0Q3Vyc29yKCkpO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcigncGxhbnRjYWxlbmRhcicsIChzb3VyY2UsIGVsLCBjdHgpID0+IHtcbiAgICAgIGNvbnN0IG1vbnRoID0gWyAnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01haScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2t0JywgJ05vdicsICdEZXonIF07XG4gICAgICBjb25zdCBwbGFudHMgPSB7fTtcbiAgICAgIGNvbnN0IHJvd3MgPSBzb3VyY2Uuc3BsaXQoJ1xcbicpO1xuICAgICAgY29uc3QgdGFibGUgPSBlbC5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3BsYW50Y2FsZW5kYXInIH0pO1xuXG4gICAgICBsZXQgbW9udGhTaG93biA9IGZhbHNlO1xuICAgICAgbGV0IHJvd0NvdW50ID0gMTtcbiAgICAgIHJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICBpZiAoIXJvdy5tYXRjaCgnOlsgLiwwLTktXSokJykpIHtcbiAgICAgICAgICAvLyBhZGQgc29tZSBzcGFjZXMgYmVmb3JlIG5leHQgcGxhbnRcbiAgICAgICAgICBpZiAobW9udGhTaG93bikge1xuICAgICAgICAgICAgdGFibGUuY3JlYXRlRWwoJ3RyJywgeyBjbHM6ICdzcGFjZXInIH0gKS5jcmVhdGVFbCgndGQnLCB7IGF0dHI6IHsgY29sc3BhbjogJzI1JyB9IH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHBsYW50IG5hbWUgaW4gdmFyaWFibGUgcm93XG4gICAgICAgICAgbGV0IHRhYmxlUm93ID0gdGFibGUuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgICAgbGV0IGxhYmVsQ2VsbCA9IHRhYmxlUm93LmNyZWF0ZUVsKCd0aCcpO1xuICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24ocm93LCBsYWJlbENlbGwsICcnLCB0aGlzKTtcblxuICAgICAgICAgIC8vIHNob3cgbW9udGhzIG9uIGZpcnN0IGNvbHVtbiBvbmx5XG4gICAgICAgICAgaWYgKCFtb250aFNob3duIHx8IHJvd0NvdW50KysgJSA2ID09IDApIHtcbiAgICAgICAgICAgIG1vbnRoU2hvd24gPSB0cnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPDEyOyBpKyspIHtcbiAgICAgICAgICAgICAgdGFibGVSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiBtb250aFtpXSwgYXR0cjogeyBjb2xzcGFuOiAnMicgfSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IFsgbGFiZWwsIGhpZ2hsaWdodHMgXSA9IHJvdy5zcGxpdCgnOicpO1xuICAgICAgICAgIGxldCB0YWJsZVJvdyA9IHRhYmxlLmNyZWF0ZUVsKCd0cicsIHsgY2xzOiBsYWJlbC50b0xvd2VyQ2FzZSgpLm5vcm1hbGl6ZShcIk5GRFwiKS5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCBcIlwiKS5yZXBsYWNlKC8gL2csIFwiLVwiKSB9KTtcbiAgICAgICAgICBoaWdobGlnaHRzID0gcGFyc2VNb250aHMoaGlnaGxpZ2h0cy5yZXBsYWNlKC8gL2csICcnKSk7XG4gICAgICAgICAgdGFibGVSb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiBsYWJlbCB9KTtcblxuICAgICAgICAgIGZvciAobGV0IGk9MDsgaTwyNDsgaSsrKSB7XG4gICAgICAgICAgICB0YWJsZVJvdy5jcmVhdGVFbCgndGQnLCB7IGF0dHI6IHsgdGl0bGU6IG1vbnRoW01hdGguZmxvb3IoaSAvIDIpXSB9LCB0ZXh0OiBoaWdobGlnaHRzLmluY2x1ZGVzKGkrMSkgPyAneCcgOiAnJywgY2xzOiBoaWdobGlnaHRzLmluY2x1ZGVzKGkrMSkgPyAnaGlnaGxpZ2h0JyA6ICcnIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBeUM7QUFFekMsSUFBTSxjQUFjLENBQUMsVUFBVTtBQUM3QixNQUFJLFNBQVMsQ0FBQztBQUNkLFFBQU0sU0FBUyxNQUFNLE1BQU0sR0FBRztBQUU5QixRQUFNLGtCQUFrQixDQUFDLE9BQU8sS0FBS0EsWUFBVztBQUM5QyxRQUFJLE1BQU0sV0FBVyxHQUFHLEdBQUc7QUFDekIsTUFBQUEsUUFBTyxDQUFDLElBQUk7QUFBQSxJQUNkO0FBQ0EsUUFBSSxNQUFNLFNBQVMsR0FBRyxHQUFHO0FBQ3ZCLE1BQUFBLFFBQU8sQ0FBQyxJQUFJO0FBQUEsSUFDZDtBQUNBLFFBQUksSUFBSSxXQUFXLEdBQUcsR0FBRztBQUN2QixNQUFBQSxRQUFPQSxRQUFPLFNBQVMsQ0FBQyxJQUFJO0FBQUEsSUFDOUI7QUFDQSxRQUFJLElBQUksU0FBUyxHQUFHLEdBQUc7QUFDckIsTUFBQUEsUUFBT0EsUUFBTyxTQUFTLENBQUMsSUFBSTtBQUFBLElBQzlCO0FBQ0EsV0FBT0EsUUFBTyxPQUFPLE9BQUssT0FBTyxLQUFLLFFBQVE7QUFBQSxFQUNoRDtBQUVBLGFBQVcsU0FBUyxRQUFRO0FBQzFCLFFBQUksTUFBTSxTQUFTLEdBQUcsR0FBRztBQUV2QixZQUFNLENBQUMsT0FBTyxHQUFHLElBQUksTUFBTSxRQUFRLE9BQU8sRUFBRSxFQUFFLE1BQU0sR0FBRyxFQUFFLElBQUksTUFBTTtBQUNuRSxZQUFNLENBQUMsV0FBVyxPQUFPLElBQUksTUFBTSxNQUFNLEdBQUc7QUFDNUMsWUFBTSxhQUFhLENBQUM7QUFDcEIsZUFBUyxJQUFJLE9BQU8sS0FBSyxLQUFLLEtBQUs7QUFDakMsbUJBQVcsS0FBSyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7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
